# v1.3.1 Navigation Calibration + Cloudflare Analytics

**Release Date:** January 21, 2026
**Branch:** v1.3.1
**Status:** Production
**Type:** Calibration Release

---

## Executive Summary

v1.3.1 is a **calibration release** that restores the Projects dropdown to reestablish conceptual hierarchy while preserving all v1.3.0 improvements. This release also adds Cloudflare Web Analytics for lightweight, privacy-friendly visitor insights.

**Key Changes:**
- ✅ Projects dropdown restored (was removed in v1.3.0)
- ✅ Navigation reordered for better hierarchy
- ✅ Cloudflare Web Analytics added to all pages
- ✅ Active state logic for Projects when on subdomains
- ✅ All v1.3.0 improvements retained (light-default theme, hamburger-on-overflow)

---

## Navigation Changes

### Rationale

**The Problem with v1.3.0:**
- Field Notes and Still Goods appeared as peer links alongside Services, How It Works, About, Contact
- This flattened the information architecture and removed conceptual hierarchy
- Lost the "practice" feeling where projects are outputs, not primary actions

**The v1.3.1 Solution:**
- Restore Projects as a first-class nav item
- Frame Field Notes, Still Goods, and Max Stewart as **outputs** under Projects
- Reduce top-level nav clutter
- Reestablish intentional hierarchy

### Final Universal Nav Structure

**Used identically across all three domains:**
- scottbertrand.com
- notes.scottbertrand.com
- goods.scottbertrand.com

**Left (anchor):**
- SB | SCOTT BERTRAND → always links to https://scottbertrand.com/

**Center (primary actions):**
- Services
- How It Works
- Projects ▾ (dropdown)

**Right (secondary/utility):**
- Contact
- Theme toggle (visually demoted, utility-only)

### Projects Dropdown Structure

**Dropdown Items:**
1. **Field Notes**
   - Logo: `field-notes-menu-dark.png`
   - Descriptor: "Working archive · essays · systems"
   - Link: https://notes.scottbertrand.com/

2. **Still Goods**
   - Logo: `still-goods-menu-dark.png`
   - Descriptor: "Seasonal objects · limited issues"
   - Link: https://goods.scottbertrand.com/

3. **Max Stewart** (Coming Soon)
   - Logo: `maxstewart-dark.png`
   - Descriptor: "Coming Soon"
   - Link: https://maxstewart.life/
   - State: Disabled (`.nav-dropdown-item--disabled`)

**Dropdown Behavior:**
- Subtle glass treatment (same recipe as nav pill from v1.2.x)
- Simple vertical list
- Click or hover to open
- Click outside or Escape to close
- Keyboard accessible (Enter/Space to toggle)

**Visual Cohesion:**
- Dropdown maintains aesthetic alignment with overall design
- Muted descriptors provide context without noise
- Logo images swap for light/dark themes (via theme.js)

### Active State Logic

**Projects appears active when:**
- Current hostname includes `notes.scottbertrand` (Field Notes)
- Current hostname includes `goods.scottbertrand` (Still Goods)

**Implementation:**
```javascript
// Active state logic in dropdown.js
const currentHost = window.location.hostname;
const isProjectSite = currentHost.includes('notes.scottbertrand') ||
                     currentHost.includes('goods.scottbertrand');

if (isProjectSite) {
    toggle.classList.add('active');
}
```

**Effect:**
- When on Field Notes or Still Goods, the Projects nav item shows an active state
- Individual dropdown items may also show subtle active state
- Provides clear wayfinding for users

### Responsive Behavior (Retained from v1.3.0)

**Default:**
- Inline nav displays all items

**Overflow Detection:**
- Uses ResizeObserver (content-aware, not fixed breakpoints)
- Hamburger appears only when nav content would spill
- Collapses into fullscreen overlay

**Hamburger Menu Contains:**
- Services
- How It Works
- Projects (with Field Notes, Still Goods, Max Stewart nested)
- Contact
- Theme toggle

---

## Cloudflare Web Analytics

### Why Cloudflare?

**Compared to Wix Analytics:**
- ❌ No "someone viewed your site" alerts
- ✅ Quiet confirmation people are visiting
- ✅ Location + referrer insights
- ✅ Zero monthly cost
- ✅ Zero analytics anxiety

**Compared to Google Analytics:**
- ✅ Lightweight script (~5KB)
- ✅ No cookies by default (no cookie banner required in most cases)
- ✅ Privacy-friendly (no cross-site tracking)
- ✅ Simple dashboard
- ✅ Real-time data

### What You Get (Free)

- Real-time visitor count
- Country/region breakdown
- Top pages by views
- Referrer sources
- Device types (desktop/mobile/tablet)
- Browser types

### What You Don't Get

- Visitor alerts or email notifications
- Event-level tracking (unless you add custom code)
- Goal tracking
- E-commerce analytics
- User flows

**Note:** If you later want event tracking or alerts, you can add Google Analytics for specific events while keeping Cloudflare as your clean baseline.

### Implementation

**Script Placement:**
```html
<!-- Cloudflare Web Analytics -->
<script defer src="https://static.cloudflareinsights.com/beacon.min.js"
        data-cf-beacon='{"token": "YOUR_CLOUDFLARE_TOKEN_HERE"}'></script>
```

**Location:** Before `</head>` on all pages
**Pages Updated:** 14 main site + 4 subdomain pages (18 total)

**Placeholder Token:**
The current token value is `YOUR_CLOUDFLARE_TOKEN_HERE` and must be replaced with your actual Cloudflare Web Analytics token.

### Setup Instructions

**1. Add Site in Cloudflare Dashboard**
   - Log into Cloudflare Dashboard
   - Go to Analytics & Logs → Web Analytics
   - Click "Add a site"
   - Enter: `scottbertrand.com`
   - Cloudflare generates a site token

**2. Replace Token**
   - Find/replace `YOUR_CLOUDFLARE_TOKEN_HERE` with your actual token
   - Option A: Replace in all files manually
   - Option B: Use find/replace across project
   - Option C: Use sed/grep for bulk replacement

**3. Deploy and Verify**
   - Push changes to GitHub
   - Vercel deploys automatically
   - Visit site in incognito window
   - Check Cloudflare Dashboard for page views

**4. Same Token or Separate?**
   - **Same token** for all three domains → unified dashboard
   - **Separate tokens** → per-property dashboards
   - Recommendation: Use same token for unified view

### Feasibility Requirements

Cloudflare Web Analytics requires either:
- Domain DNS managed by Cloudflare, OR
- Cloudflare-proxied setup (orange cloud enabled)

If scottbertrand.com DNS is already on Cloudflare → ✅ Feasible
If not → Would need to move DNS (still free, but a decision to make)

---

## Technical Implementation

### Files Modified

**Main Site (scottbertrand.com):**
- 14 HTML pages (all pages)
- `dropdown.js` (restored with active state logic)

**Still Goods (goods.scottbertrand.com):**
- `index.html`
- `about.html`
- `dropdown.js` (added)

**Field Notes (notes.scottbertrand.com):**
- `index.html`
- `field-note.html`
- `dropdown.js` (added)

**Total:** 18 HTML pages + 3 dropdown.js files

### Commit History

**Main Site:**
- `ca2a055` - "feat: v1.3.1 navigation calibration + Cloudflare Analytics"

**Still Goods:**
- `ebdbb90` - "feat: v1.3.1 navigation with Projects dropdown + analytics"

**Field Notes:**
- `8c11417` - "feat: v1.3.1 navigation with Projects dropdown + analytics"

### Build Verification

**Main Site:**
```
✓ 23 modules transformed
✓ built in 157ms
```

**Still Goods:**
```
✓ built in 93ms
```

**Field Notes:**
```
✓ built in 79ms
```

✅ All builds clean, no errors

---

## What Was NOT Changed

This is a **calibration release**, not a rethink. The following were deliberately preserved:

- ✅ Universal header: `SB | SCOTT BERTRAND` (text-based)
- ✅ Light mode as default
- ✅ Theme system behavior (light → dark → system cycling)
- ✅ Hamburger-on-overflow responsive logic
- ✅ localStorage key: `sb-theme`
- ✅ Theme FOUC prevention
- ✅ Canonical tags (added in v1.3.0 hotfix)
- ✅ Theme-color meta tags (added in v1.3.0 hotfix)

---

## Migration Notes

### For Users

**Navigation:**
- Projects is back as a dropdown (was removed in v1.3.0)
- Field Notes and Still Goods moved under Projects
- Contact moved to the right (secondary position)
- About removed from main nav (can be restored if needed)

**Analytics:**
- Site now tracks visits via Cloudflare
- No cookies by default
- No impact on performance (script deferred)

### For Developers

**Setup Required:**
1. Replace `YOUR_CLOUDFLARE_TOKEN_HERE` with actual token (see Setup Instructions above)
2. Verify analytics working in Cloudflare Dashboard
3. Optional: Add separate tokens for subdomain-specific tracking

**Code Changes:**
- `dropdown.js` restored (was removed in v1.3.0)
- Active state detection added to dropdown.js
- Analytics script added to all HTML files
- Navigation structure updated across all pages

---

## Testing Checklist

- ✅ Projects dropdown opens/closes correctly
- ✅ Dropdown items have correct logos and descriptors
- ✅ Max Stewart shows as "Coming Soon" (disabled state)
- ✅ Projects appears active when on Field Notes
- ✅ Projects appears active when on Still Goods
- ✅ Theme toggle still works (right side, utility position)
- ✅ Hamburger menu contains nested Projects items
- ✅ Escape key closes dropdown
- ✅ Click outside closes dropdown
- ✅ ARIA attributes correct (aria-expanded, aria-haspopup, aria-hidden)
- ✅ All builds succeed without errors
- ✅ No console errors on any page
- ✅ Analytics script loads (check Network tab)

**After Deploying with Real Token:**
- [ ] Verify analytics appears in Cloudflare Dashboard
- [ ] Check page views increment
- [ ] Verify correct URLs captured
- [ ] Confirm country/referrer data populating

---

## Privacy & GDPR Notes

**Cloudflare Web Analytics:**
- Does not use cookies by default
- Does not track users across sites
- Does not build user profiles
- Compliant with GDPR, CCPA without cookie banner in most cases

**If User Requests:**
You can add a privacy policy note like:

> "This site uses Cloudflare Web Analytics to understand visitor traffic. No cookies are used, and no personal data is collected or shared. [Learn more about Cloudflare's privacy practices](https://www.cloudflare.com/privacypolicy/)."

---

## Future Considerations

### Short-term (Optional)

- Add About back to nav if needed (currently removed)
- Consider adding individual active states to dropdown items
- Add transition animations to dropdown open/close
- Test analytics on real traffic to confirm setup

### Medium-term (Deferred)

- Add custom event tracking for contact form submissions
- Add Google Analytics for specific events (keep Cloudflare as baseline)
- Consider adding structured data (JSON-LD) for services
- Accessibility audit for dropdown keyboard navigation

### Long-term (Deferred)

- Max Stewart launch (update dropdown state from disabled to active)
- Consider visitor flow tracking if needed
- E-commerce analytics for Still Goods (if/when store launches)

---

## Comparison: v1.3.0 vs v1.3.1

| Feature | v1.3.0 | v1.3.1 |
|---------|--------|--------|
| Universal header | SB \| SCOTT BERTRAND | SB \| SCOTT BERTRAND |
| Nav structure | 6 direct links | 4 items (Projects dropdown) |
| Projects dropdown | ❌ Removed | ✅ Restored |
| Field Notes placement | Top-level | Under Projects |
| Still Goods placement | Top-level | Under Projects |
| About link | Top-level | Removed (can restore) |
| Contact placement | Top-level (middle) | Top-level (right) |
| Theme toggle | Right side | Right side |
| Analytics | None | Cloudflare Web Analytics |
| Active states | Nav links only | Projects + dropdown items |
| dropdown.js | ❌ Removed | ✅ Restored with enhancements |

---

## Deployment Status

**Branch:** v1.3.1
**Main Site:** ✅ Committed (`ca2a055`)
**Still Goods:** ✅ Committed (`ebdbb90`)
**Field Notes:** ✅ Committed (`8c11417`)

**Next Steps:**
1. Merge v1.3.1 to main
2. Push to GitHub (all three repos)
3. Vercel auto-deploys
4. Replace analytics token with real Cloudflare token
5. Verify analytics working in dashboard

---

## Conclusion

v1.3.1 successfully restores intentional navigation hierarchy while maintaining all technical improvements from v1.3.0. The Projects dropdown reframes Field Notes, Still Goods, and Max Stewart as **outputs** rather than peer links, reducing top-level clutter and restoring the "practice" feeling.

Cloudflare Web Analytics provides quiet, privacy-friendly visitor insights without cookies, alerts, or anxiety—a perfect fit for the site's philosophy.

This is a calibration release that honors the original intent while preserving modern improvements.

---

**Documentation Status:** ✅ Complete
**Production Readiness:** ✅ Ready (pending token replacement)
**Follow-up Required:** Replace `YOUR_CLOUDFLARE_TOKEN_HERE` with actual token after Cloudflare setup
