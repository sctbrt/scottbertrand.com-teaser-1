/* ============================================================
   Glass Material System — scottbertrand.com
   v1.5.1
   ------------------------------------------------------------
   Architectural, edge-led glass.
   Calm center field. Subtle refraction cues.
   No gimmicks. No card UI. No heavy blur.
   ============================================================ */

/* ------------------------------------------------------------
   1. Root Variables (tuned for restraint)
   ------------------------------------------------------------ */

:root {
  /* Global light direction (normalized -1 → 1) */
  --glass-lx: 0.15; /* left/right */
  --glass-ly: -0.15; /* top/bottom */

  /* Core material tuning - Light mode (default) */
  --glass-bg: rgba(250, 250, 250, 0.5);
  --glass-bg-fallback: rgba(250, 250, 250, 0.75);

  --glass-blur-core: 12px;
  --glass-blur-edge: 16px;

  /* Edge definition */
  --glass-radius-sm: 12px;
  --glass-radius-md: 16px;
  --glass-radius-lg: 20px;

  /* Edge highlight + shadow (subtle but present) */
  --glass-edge-highlight: rgba(255, 255, 255, 0.75);
  --glass-edge-shadow: rgba(0, 0, 0, 0.08);
  --glass-border: rgba(0, 0, 0, 0.06);

  /* Motion restraint */
  --glass-transition-fast: 240ms cubic-bezier(0.25, 0.1, 0.25, 1);
  --glass-transition-slow: 420ms cubic-bezier(0.25, 0.1, 0.25, 1);
}

/* Dark mode adjustments - enhanced luminous edges */
[data-theme="dark"] {
  --glass-bg: rgba(26, 26, 26, 0.4);
  --glass-bg-fallback: rgba(26, 26, 26, 0.7);
  --glass-edge-highlight: rgba(255, 255, 255, 0.18);
  --glass-edge-shadow: rgba(0, 0, 0, 0.35);
  --glass-border: rgba(255, 255, 255, 0.08);
}

/* ------------------------------------------------------------
   2. Base Glass Container
   ------------------------------------------------------------ */

.glass {
  position: relative;
  background: var(--glass-bg);
  border-radius: var(--glass-radius-md);
  border: 1px solid var(--glass-border);
  overflow: hidden;

  /* Calm interior field */
  backdrop-filter: blur(var(--glass-blur-core));
  -webkit-backdrop-filter: blur(var(--glass-blur-core));

  transition:
    background var(--glass-transition-slow),
    backdrop-filter var(--glass-transition-slow),
    border-color var(--glass-transition-slow);
}

/* Fallback when backdrop-filter is unsupported */
@supports not ((backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))) {
  .glass {
    background: var(--glass-bg-fallback);
  }
}

/* ------------------------------------------------------------
   3. Edge-Led Refraction (the important part)
   ------------------------------------------------------------ */

.glass::before,
.glass::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
}

/* Inner highlight — light-catching edge */
.glass::before {
  box-shadow:
    inset calc(var(--glass-lx) * -4px)
          calc(var(--glass-ly) * -4px)
          16px
          var(--glass-edge-highlight);
}

/* Opposing shadow — thickness cue */
.glass::after {
  box-shadow:
    inset calc(var(--glass-lx) * 4px)
          calc(var(--glass-ly) * 4px)
          18px
          var(--glass-edge-shadow);
}

/* ------------------------------------------------------------
   4. Glass Variants (Structural, not decorative)
   ------------------------------------------------------------ */

/* Wide section divider / band */
.glass--band {
  border-radius: var(--glass-radius-lg);
  padding: 1.25rem 1.5rem;
}

/* Content container (case studies, offerings) */
.glass--panel {
  padding: 2.5rem 2rem 4rem 2rem;
}

/* Narrow editorial callout / system note */
.glass--callout {
  border-radius: var(--glass-radius-sm);
  padding: 1rem 1.25rem;
}

/* Footer / closing container */
.glass--footer {
  border-radius: var(--glass-radius-lg);
  padding: 2rem;
}

/* Hero panel - prominent glass with stronger presence */
.glass--hero {
  --glass-blur-core: 20px;
  border-radius: var(--glass-radius-lg);
  padding: 3rem 2.5rem;
  border: 1px solid var(--glass-border);
}

/* Hero-specific edge lighting - more luminous */
.glass--hero::before {
  box-shadow:
    inset calc(var(--glass-lx) * -6px)
          calc(var(--glass-ly) * -6px)
          24px
          var(--glass-edge-highlight),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.glass--hero::after {
  box-shadow:
    inset calc(var(--glass-lx) * 6px)
          calc(var(--glass-ly) * 6px)
          28px
          var(--glass-edge-shadow);
}

/* Dark mode hero - the dramatic look */
[data-theme="dark"] .glass--hero {
  --glass-bg: rgba(30, 30, 30, 0.5);
  --glass-edge-highlight: rgba(255, 255, 255, 0.22);
  --glass-edge-shadow: rgba(0, 0, 0, 0.45);
  --glass-border: rgba(255, 255, 255, 0.1);
  border: 1px solid var(--glass-border);
}

/* Subtle top-edge glow in dark mode */
[data-theme="dark"] .glass--hero::before {
  box-shadow:
    inset calc(var(--glass-lx) * -6px)
          calc(var(--glass-ly) * -6px)
          24px
          var(--glass-edge-highlight),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

/* ------------------------------------------------------------
   5. Reduced Motion Handling
   ------------------------------------------------------------ */

@media (prefers-reduced-motion: reduce) {
  .glass {
    transition: none;
  }
}

/* ------------------------------------------------------------
   6. Guardrails (intentional limits)
   ------------------------------------------------------------ */

/* Never stack visual noise */
.glass > .glass {
  background: transparent;
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}